<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Терновая гряда D&D - Создание персонажа</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            background-image: url('https://www.transparenttextures.com/patterns/dark-wood.png');
            background-size: cover;
            font-family: 'Cinzel', serif;
            color: #e0d8c3;
        }
        .main-container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 20px;
            max-width: 1200px;
            width: 100%;
            margin-left: auto;
            margin-right: auto;
        }
        .container {
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid #d4a017;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            padding: 20px;
            text-align: center;
        }
        .form-container {
            flex: 0 0 400px; /* Фиксированная ширина для точного центрирования */
            margin: 0 auto;
        }
        .race-info {
            flex: 0 0 500px;
            text-align: left;
            overflow-y: auto;
            max-height: 80vh;
            margin-left: 20px; /* Смещение правее */
        }
        .race-info p {
            font-size: 1em;
            line-height: 1.5;
            margin: 10px 0;
        }
        .race-info strong {
            color: #d4a017;
            font-size: 2.5em; /* Увеличенный размер названия расы */
        }
        .form-container input,
        .form-container select {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #d4a017;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.1);
            color: #e0d8c3;
            font-family: 'Cinzel', serif;
        }
        .stat-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            margin: 10px 0;
        }
        .stat-container label {
            flex: 1;
            font-size: 1.1em;
            text-align: left;
        }
        .stat-container input {
            width: 60px;
            text-align: center;
        }
        .stat-container button {
            width: 30px;
            height: 30px;
            background: #d4a017;
            color: black;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .stat-container button:disabled {
            background: #666;
            cursor: not-allowed;
            box-shadow: none;
        }
        .stat-container button:hover:not(:disabled) {
            box-shadow: 0 0 10px #d4a017;
        }
        .points {
            font-size: 1.2em;
            margin: 10px 0;
        }
        .error {
            color: #ff6b6b;
            font-size: 1em;
            margin: 10px 0;
        }
        button[type="submit"] {
            width: 100%;
            padding: 10px;
            background: #d4a017;
            color: black;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Cinzel', serif;
            font-size: 16px;
            transition: all 0.3s;
        }
        button[type="submit"]:hover {
            box-shadow: 0 0 10px #d4a017;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="container form-container">
            <h1>Создание персонажа</h1>
            <form id="characterForm">
                <label for="name">Имя персонажа:</label>
                <input type="text" id="name" name="name" required>

                <label for="race">Раса:</label>
                <select id="race" name="race" required onchange="applyRaceBonuses()">
                    <option value="">Выберите расу</option>
                    <option value="Человек">Человек</option>
                    <option value="Драконорождённый">Драконорождённый</option>
                    <option value="Гном">Гном</option>
                    <option value="Тифлинг">Тифлинг</option>
                    <option value="Полуэльф">Полуэльф</option>
                    <option value="Полуорк">Полуорк</option>
                    <option value="Дварф">Дварф</option>
                </select>

                <label for="class">Класс:</label>
                <select id="class" name="class" required>
                    <option value="">Выберите класс</option>
                    <option value="Воин">Воин</option>
                    <option value="Варвар">Варвар</option>
                    <option value="Монах">Монах</option>
                    <option value="Чародей">Чародей</option>
                    <option value="Друид">Друид</option>
                    <option value="Волшебник">Волшебник</option>
                    <option value="Жрец">Жрец</option>
                    <option value="Паладин">Паладин</option>
                    <option value="Колдун">Колдун</option>
                    <option value="Следопыт">Следопыт</option>
                    <option value="Плут">Плут</option>
                </select>

                <h2>Характеристики (15 очков):</h2>
                <div class="stat-container">
                    <label for="strength">Сила:</label>
                    <button type="button" id="strengthDec" onclick="changeStat('strength', -1)" disabled>-</button>
                    <input type="number" id="strength" name="strength" value="8" min="8" max="20" readonly>
                    <button type="button" id="strengthInc" onclick="changeStat('strength', 1)" disabled>+</button>
                </div>
                <div class="stat-container">
                    <label for="dexterity">Ловкость:</label>
                    <button type="button" id="dexterityDec" onclick="changeStat('dexterity', -1)" disabled>-</button>
                    <input type="number" id="dexterity" name="dexterity" value="8" min="8" max="20" readonly>
                    <button type="button" id="dexterityInc" onclick="changeStat('dexterity', 1)" disabled>+</button>
                </div>
                <div class="stat-container">
                    <label for="constitution">Телосложение:</label>
                    <button type="button" id="constitutionDec" onclick="changeStat('constitution', -1)" disabled>-</button>
                    <input type="number" id="constitution" name="constitution" value="8" min="8" max="20" readonly>
                    <button type="button" id="constitutionInc" onclick="changeStat('constitution', 1)" disabled>+</button>
                </div>
                <div class="stat-container">
                    <label for="wisdom">Мудрость:</label>
                    <button type="button" id="wisdomDec" onclick="changeStat('wisdom', -1)" disabled>-</button>
                    <input type="number" id="wisdom" name="wisdom" value="8" min="8" max="20" readonly>
                    <button type="button" id="wisdomInc" onclick="changeStat('wisdom', 1)" disabled>+</button>
                </div>
                <div class="stat-container">
                    <label for="intelligence">Интеллект:</label>
                    <button type="button" id="intelligenceDec" onclick="changeStat('intelligence', -1)" disabled>-</button>
                    <input type="number" id="intelligence" name="intelligence" value="8" min="8" max="20" readonly>
                    <button type="button" id="intelligenceInc" onclick="changeStat('intelligence', 1)" disabled>+</button>
                </div>
                <div class="stat-container">
                    <label for="charisma">Харизма:</label>
                    <button type="button" id="charismaDec" onclick="changeStat('charisma', -1)" disabled>-</button>
                    <input type="number" id="charisma" name="charisma" value="8" min="8" max="20" readonly>
                    <button type="button" id="charismaInc" onclick="changeStat('charisma', 1)" disabled>+</button>
                </div>
                <p class="points">Осталось очков: <span id="points">15</span></p>
                <div id="error" class="error"></div>
                <button type="submit">Создать персонажа</button>
            </form>
        </div>
        <div class="container race-info">
            <div id="raceDescription">
                <p>Выберите расу, чтобы увидеть её бонусы и умения.</p>
            </div>
        </div>
    </div>
    <script>
        const maxPoints = 15;
        let points = maxPoints;
        let baseStats = { strength: 8, dexterity: 8, constitution: 8, wisdom: 8, intelligence: 8, charisma: 8 };
        let minStats = { strength: 8, dexterity: 8, constitution: 8, wisdom: 8, intelligence: 8, charisma: 8 };

        const raceBonuses = {
            'Человек': {
                bonuses: { strength: 1, dexterity: 1, constitution: 1, wisdom: 1, intelligence: 1, charisma: 1 },
                description: `
                    <strong>Человек</strong><br>
                    <strong>Увеличение характеристик:</strong> Значение всех ваших характеристик увеличивается на 1.<br>
                    <strong>Возраст:</strong> Люди становятся взрослыми в районе 20 лет, и живут менее столетия.<br>
                    <strong>Мировоззрение:</strong> Люди не имеют склонности к определённому мировоззрению. Среди них встречаются как лучшие, так и худшие представители.<br>
                    <strong>Размер:</strong> Люди сильно различаются по размерам. Некоторые с трудом достигают 5 футов (152 см) ростом, тогда как другие имеют рост, превосходящий 6 футов (183 см). Ваш размер — Средний.<br>
                    <strong>Скорость:</strong> Ваша базовая скорость перемещения составляет 30 футов.<br>
                    <strong>Языки:</strong> Вы можете говорить, читать и писать на Общем и ещё одном языке на ваш выбор. Люди обычно изучают языки народов, с которыми имеют дело, включая редкие диалекты.
                `
            },
            'Драконорождённый': {
                bonuses: { strength: 2, charisma: 1 },
                description: `
                    <strong>Драконорождённый</strong><br>
                    <strong>Увеличение характеристик:</strong> Значение вашей Силы увеличивается на 2, а Харизмы — на 1.<br>
                    <strong>Возраст:</strong> Юные драконорождённые растут быстро. Они начинают ходить через час после вылупления, к трём годам достигают роста и сложения 10-летнего человека, и становятся взрослыми в 15. Живут они примерно до 80 лет.<br>
                    <strong>Мировоззрение:</strong> Драконорождённые склонны к крайностям, сознательно выбирая сторону добра или зла. Большинство добры, но те, кто принял сторону Тиамат, могут быть чрезвычайно жестокими.<br>
                    <strong>Размер:</strong> Драконорождённые выше и тяжелее людей, их рост около 6 футов (2 м) и вес около 250 фунтов (115 кг). Ваш размер — Средний.<br>
                    <strong>Скорость:</strong> Ваша базовая скорость перемещения составляет 30 футов.<br>
                    <strong>Наследие драконов:</strong> Выберите тип дракона. Вы получаете оружие дыхания и сопротивление к урону соответствующего вида.<br>
                    <strong>Оружие дыхания:</strong> Вы можете действием выдохнуть разрушительную энергию. Сложность спасброска: 8 + модификатор Телосложения + бонус мастерства. Урон: 2к6 (3к6 на 6 уровне, 4к6 на 11, 5к6 на 16). Перезарядка после отдыха.<br>
                    <strong>Сопротивление урону:</strong> Сопротивление к урону, указанному в вашем наследие драконов.<br>
                    <strong>Языки:</strong> Вы можете говорить, читать и писать на Общем и Драконьем языках.
                `
            },
            'Гном': {
                bonuses: { intelligence: 2 },
                description: `
                    <strong>Гном</strong><br>
                    <strong>Увеличение характеристик:</strong> Значение вашего Интеллекта увеличивается на 2.<br>
                    <strong>Возраст:</strong> Гномы взрослеют с той же скоростью, что и люди, и к 40 годам переходят к спокойной взрослой жизни. Они живут от 350 до почти 500 лет.<br>
                    <strong>Мировоззрение:</strong> Гномы чаще всего добры. Стремящиеся к порядку становятся мудрецами, инженерами, учёными. Склонные к хаосу — менестрелями, мошенниками, ювелирами.<br>
                    <strong>Размер:</strong> Рост гномов между 3 и 4 футами (91–122 см), средний вес — 40 фунтов (18 кг). Ваш размер — Маленький.<br>
                    <strong>Скорость:</strong> Ваша базовая скорость перемещения равна 25 футам.<br>
                    <strong>Тёмное зрение:</strong> На расстоянии 60 футов вы видите в темноте как при тусклом освещении, а при тусклом — как при ярком. В темноте различаете только оттенки серого.<br>
                    <strong>Гномья хитрость:</strong> Преимущество на спасброски Интеллекта, Мудрости и Харизмы против магии.<br>
                    <strong>Языки:</strong> Вы можете говорить, читать и писать на Общем и Гномьем языках.
                `
            },
            'Тифлинг': {
                bonuses: { intelligence: 1, charisma: 2 },
                description: `
                    <strong>Тифлинг</strong><br>
                    <strong>Увеличение характеристик:</strong> Значение вашего Интеллекта увеличивается на 1, а Харизмы — на 2.<br>
                    <strong>Возраст:</strong> Тифлинги взрослеют как люди, но живут немного дольше.<br>
                    <strong>Мировоззрение:</strong> Тифлинги склонны к хаотичному мировоззрению, независимы по природе.<br>
                    <strong>Размер:</strong> Тифлинги схожи с людьми по росту и телосложению. Ваш размер — Средний.<br>
                    <strong>Скорость:</strong> Ваша базовая скорость перемещения — 30 футов.<br>
                    <strong>Тёмное зрение:</strong> На расстоянии 60 футов вы видите в темноте как при тусклом освещении, а при тусклом — как при ярком. В темноте различаете только оттенки серого.<br>
                    <strong>Адское сопротивление:</strong> Сопротивление урону огнём.<br>
                    <strong>Дьявольское наследие:</strong> Знаете заклинание чудотворство. С 3 уровня — адское возмездие (1/день, 2 уровень). С 5 уровня — тьма (1/день). Базовая характеристика — Харизма.<br>
                    <strong>Языки:</strong> Вы можете говорить, читать и писать на Общем и Инфернальном.
                `
            },
            'Полуэльф': {
                bonuses: { charisma: 2, custom: 2 }, // +2 к Харизме и +1 к двум другим на выбор
                description: `
                    <strong>Полуэльф</strong><br>
                    <strong>Увеличение характеристик:</strong> Значение вашей Харизмы увеличивается на 2, а двух других характеристик на ваш выбор — на 1.<br>
                    <strong>Возраст:</strong> Полуэльфы взрослеют как люди, достигая зрелости к 20 годам, но живут до 180 лет.<br>
                    <strong>Мировоззрение:</strong> Полуэльфы склонны к хаосу, ценят личную свободу и творческое самовыражение.<br>
                    <strong>Размер:</strong> Полуэльфы почти такого же размера, как люди, рост от 5 до 6 футов (155–183 см). Ваш размер — Средний.<br>
                    <strong>Скорость:</strong> Базовая скорость перемещения — 30 футов.<br>
                    <strong>Тёмное зрение:</strong> На расстоянии 60 футов вы видите в темноте как при тусклом освещении, а при тусклом — как при ярком. В темноте различаете только оттенки серого.<br>
                    <strong>Наследие фей:</strong> Преимущество на спасброски от очарования, и вас невозможно магически усыпить.<br>
                    <strong>Универсальность навыков:</strong> Владение двумя навыками на ваш выбор.<br>
                    <strong>Языки:</strong> Вы можете говорить, читать и писать на Общем, Эльфийском и ещё одном языке на ваш выбор.
                `
            },
            'Полуорк': {
                bonuses: { strength: 2, constitution: 1 },
                description: `
                    <strong>Полуорк</strong><br>
                    <strong>Увеличение характеристик:</strong> Значение вашей Силы увеличивается на 2, а Телосложения — на 1.<br>
                    <strong>Возраст:</strong> Полуорки взрослеют к 14 годам, живут до 75 лет.<br>
                    <strong>Мировоззрение:</strong> Полуорки склонны к хаосу и не особо к добру. Выросшие среди орков часто злы.<br>
                    <strong>Размер:</strong> Полуорки выше и массивнее людей, рост от 5 до 6 футов (152–185 см). Ваш размер — Средний.<br>
                    <strong>Скорость:</strong> Ваша базовая скорость перемещения — 30 футов.<br>
                    <strong>Тёмное зрение:</strong> На расстоянии 60 футов вы видите в темноте как при тусклом освещении, а при тусклом — как при ярком. В темноте различаете только оттенки серого.<br>
                    <strong>Угрожающий вид:</strong> Владение навыком Запугивание.<br>
                    <strong>Непоколебимая стойкость:</strong> Если хиты опустились до 0, но вы не убиты, хиты становятся 1 (1/день).<br>
                    <strong>Свирепые атаки:</strong> При критическом попадании рукопашной атакой оружием добавляется одна кость урона.<br>
                    <strong>Языки:</strong> Вы можете говорить, читать и писать на Общем и Орочьем.
                `
            },
            'Дварф': {
                bonuses: { constitution: 2 },
                description: `
                    <strong>Дварф</strong><br>
                    <strong>Увеличение характеристик:</strong> Значение вашего Телосложения увеличивается на 2.<br>
                    <strong>Возраст:</strong> Дварфы взрослеют с той же скоростью, что и люди, но считаются молодыми до 50 лет. В среднем они живут около 350 лет.<br>
                    <strong>Мировоззрение:</strong> Большинство дварфов законопослушны, с сильным чувством чести и веры в традиции.<br>
                    <strong>Размер:</strong> Дварфы в среднем от 4 до 5 футов ростом (122–152 см) и весят около 150 фунтов (68 кг). Ваш размер — Средний.<br>
                    <strong>Скорость:</strong> Ваша базовая скорость перемещения — 25 футов. Ваша скорость не уменьшается при ношении тяжёлых доспехов.<br>
                    <strong>Тёмное зрение:</strong> На расстоянии 60 футов вы видите в темноте как при тусклом освещении, а при тусклом — как при ярком. В темноте различаете только оттенки серого.<br>
                    <strong>Дварфская стойкость:</strong> Преимущество на спасброски против яда и сопротивление урону ядом.<br>
                    <strong>Знание оружия:</strong> Владение боевым топором, ручным топором, лёгким молотом и боевым молотом.<br>
                    <strong>Знание инструментов:</strong> Владение одним из инструментов на выбор: кузнечные, пивоваренные или каменщицкие.<br>
                    <strong>Знание камня:</strong> При проверке Интеллекта (История), связанной с каменными изделиями, ваш бонус мастерства удваивается.<br>
                    <strong>Языки:</strong> Вы можете говорить, читать и писать на Общем и Дварфском.
                `
            }
        };

        function applyRaceBonuses() {
            const raceSelect = document.getElementById('race');
            const race = raceSelect.value;

            // Сброс к базовым значениям
            for (let stat in baseStats) {
                document.getElementById(stat).value = baseStats[stat];
                minStats[stat] = baseStats[stat];
            }
            points = maxPoints;

            // Активируем кнопки
            const buttons = document.querySelectorAll('.stat-container button');
            buttons.forEach(button => button.disabled = false);

            if (raceBonuses[race]) {
                const bonuses = raceBonuses[race].bonuses;
                for (let stat in bonuses) {
                    if (stat === 'custom') {
                        // Для полуэльфа: +1 к двум характеристикам на выбор (например, Сила и Ловкость)
                        document.getElementById('strength').value = baseStats.strength + 1;
                        document.getElementById('dexterity').value = baseStats.dexterity + 1;
                        minStats.strength = baseStats.strength + 1;
                        minStats.dexterity = baseStats.dexterity + 1;
                    } else {
                        const bonus = bonuses[stat];
                        const currentValue = parseInt(document.getElementById(stat).value);
                        const newValue = baseStats[stat] + bonus;
                        document.getElementById(stat).value = newValue;
                        minStats[stat] = newValue;
                    }
                }
            }

            document.getElementById('points').textContent = points;
            updateDescription();
        }

        function changeStat(stat, change) {
            const input = document.getElementById(stat);
            let value = parseInt(input.value);
            const newValue = value + change;
            if (newValue >= minStats[stat] && newValue <= 20 && points - change >= 0) {
                input.value = newValue;
                points -= change;
                document.getElementById('points').textContent = points;
            }
        }

        function updateDescription() {
            const race = document.getElementById('race').value;
            const descriptionDiv = document.getElementById('raceDescription');
            if (raceBonuses[race]) {
                descriptionDiv.innerHTML = raceBonuses[race].description;
            } else {
                descriptionDiv.innerHTML = '<p>Выберите расу, чтобы увидеть её бонусы и умения.</p>';
            }
        }

        // Изначально кнопки неактивны
        window.onload = function() {
            const buttons = document.querySelectorAll('.stat-container button');
            buttons.forEach(button => button.disabled = true);
        };
    </script>
</body>
</html>